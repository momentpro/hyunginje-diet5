<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>형인재 감량비책 비대면 설문지 - 형인재한의원</title>
    <meta name="description" content="형인재한의원의 다이어트 프로그램 비대면 설문지입니다.">
    <link rel="icon" type="image/png" href="img_favicon.png">
    
    <style>
        /* 초기화 및 기본 스타일 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Apple SD Gothic Neo', 'Malgun Gothic', '맑은 고딕', sans-serif;
            line-height: 1.6;
            color: #4a4a4a;
            background: linear-gradient(135deg, #f9f7f4 0%, #f5f3f0 100%);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            touch-action: manipulation;
            position: relative;
        }
        
        /* 로고 컨셉의 원형 패턴 배경 */
        body::before {
            content: '';
            position: fixed;
            top: -50vh;
            left: -50vw;
            width: 200vw;
            height: 200vh;
            background: 
                radial-gradient(circle at 20% 30%, rgba(212,175,140,0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(197,160,122,0.02) 0%, transparent 50%),
                radial-gradient(circle at 60% 10%, rgba(212,175,140,0.02) 0%, transparent 40%);
            z-index: -1;
            pointer-events: none;
        }
        
        /* 컨테이너 */
        .container {
            max-width: 400px;
            margin: 0 auto;
            background: #ffffff;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 30px rgba(0,0,0,0.08);
        }
        
        /* 헤더 - 로고 컨셉에 맞는 스타일 */
        .header {
            background: linear-gradient(135deg, #fefefe 0%, #f8f6f3 100%);
            padding: 35px 25px 30px;
            border-bottom: 1px solid #ede8e1;
            position: relative;
            text-align: center;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #d4af8c 0%, #c5a07a 100%);
        }
        
        /* 로고 스타일 */
        .clinic-logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .clinic-logo {
            width: 100px;
            height: 100px;
            background: url('hyunginje-logo.png') center/contain no-repeat;
            margin-bottom: 15px;
            transition: transform 0.3s ease;
        }
        
        .clinic-logo:hover {
            transform: scale(1.05);
        }
        
        /* 로고가 없을 경우 fallback */
        .clinic-logo-fallback {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #f0ebe5 0%, #ede8e1 100%);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b5b47;
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 15px;
            box-shadow: 0 4px 12px rgba(212,175,140,0.2);
            position: relative;
            border: 2px solid #d4af8c;
            text-align: center;
            line-height: 1.2;
        }
        
        .clinic-logo-fallback::after {
            content: '형인재\A한의원';
            white-space: pre;
        }
        
        .clinic-title {
            font-size: 20px;
            font-weight: 700;
            color: #6b5b47;
            margin-bottom: 4px;
            letter-spacing: -0.3px;
        }
        
        .clinic-subtitle {
            font-size: 13px;
            color: #9b8a7a;
            font-weight: 400;
            letter-spacing: 0.5px;
            margin-bottom: 2px;
        }
        
        .clinic-english {
            font-size: 11px;
            color: #b5a394;
            font-weight: 300;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .prescription-title {
            background: linear-gradient(135deg, #f8f6f2 0%, #f4f1ec 100%);
            padding: 20px 22px;
            border-radius: 15px;
            border-left: 4px solid #d4af8c;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }
        
        .prescription-title h2 {
            font-size: 18px;
            font-weight: 700;
            color: #6b5b47;
            margin-bottom: 8px;
            letter-spacing: -0.3px;
            text-align: center;
        }
        
        .prescription-title .english {
            font-size: 12px;
            color: #9b8a7a;
            font-style: italic;
            text-align: center;
            margin-bottom: 18px;
            letter-spacing: 0.3px;
        }
        
        .survey-description {
            background: white;
            padding: 18px;
            border-radius: 12px;
            margin-top: 15px;
            border: 1px solid #f0ebe5;
            box-shadow: 0 1px 4px rgba(0,0,0,0.02);
        }
        
        .survey-description p {
            font-size: 14px;
            color: #6b5b47;
            line-height: 1.7;
            margin-bottom: 12px;
            text-align: center;
            word-break: keep-all;
            word-wrap: break-word;
        }
        
        .survey-description p:last-child {
            margin-bottom: 0;
        }
        
        .survey-description .highlight {
            color: #d97757;
            font-weight: 600;
        }
        
        /* 간단한 헤더 스타일 */
        .simple-header {
            padding: 20px 25px;
            background: linear-gradient(135deg, #fefefe 0%, #f8f6f3 100%);
            border-bottom: 1px solid #ede8e1;
        }
        
        .simple-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #d4af8c 0%, #c5a07a 100%);
        }
        
        .simple-clinic-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        .simple-logo {
            width: 50px;
            height: 50px;
            background: url('hyunginje-logo.png') center/contain no-repeat;
        }
        
        .simple-title p {
            font-size: 14px;
            color: #6b5b47;
            margin: 0;
            font-weight: 500;
        }
        
        /* 진행바 */
        .progress-section {
            padding: 22px 25px;
            background: #ffffff;
            border-bottom: 1px solid #f8f6f2;
        }
        
        .step-indicator {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 18px;
        }
        
        .step-number {
            background: linear-gradient(135deg, #d4af8c 0%, #c8a882 100%);
            color: white;
            width: 38px;
            height: 38px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(212,175,140,0.3);
            position: relative;
        }
        
        .step-number::before {
            content: '';
            position: absolute;
            inset: 2px;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 50%);
            border-radius: 50%;
            pointer-events: none;
        }
        
        .step-text {
            flex: 1;
            margin-left: 15px;
        }
        
        .step-title {
            font-size: 16px;
            font-weight: 600;
            color: #6b5b47;
            margin-bottom: 3px;
            letter-spacing: -0.2px;
        }
        
        .step-subtitle {
            font-size: 12px;
            color: #9b8a7a;
        }
        
        .progress-bar-container {
            background: #f8f6f2;
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #d4af8c 0%, #c8a882 100%);
            height: 100%;
            border-radius: 3px;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            width: 0%;
            box-shadow: 0 0 6px rgba(212,175,140,0.4);
        }
        
        /* 메인 컨텐츠 */
        .main-content {
            padding: 0 25px 25px;
            background: #ffffff;
        }
        
        /* 질문 카드 */
        .question-card {
            background: #ffffff;
            border: 1px solid #f0ebe5;
            border-radius: 20px;
            padding: 28px 22px;
            margin-bottom: 20px;
            position: relative;
            transform: translateY(20px);
            opacity: 0;
            animation: slideUp 0.6s ease-out forwards;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
        }
        
        .question-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #d4af8c 0%, #c8a882 100%);
            border-radius: 20px 20px 0 0;
        }
        
        @keyframes slideUp {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .question-header {
            margin-bottom: 28px;
        }
        
        .question-title {
            font-size: 18px;
            font-weight: 600;
            color: #6b5b47;
            margin-bottom: 10px;
            line-height: 1.4;
            letter-spacing: -0.3px;
        }
        
        .question-subtitle {
            font-size: 14px;
            color: #9b8a7a;
            font-weight: 400;
            line-height: 1.5;
        }
        
        /* 폼 요소 */
        .form-group {
            margin-bottom: 22px;
        }
        
        .form-label {
            display: block;
            font-size: 15px;
            font-weight: 500;
            color: #6b5b47;
            margin-bottom: 12px;
            letter-spacing: -0.1px;
        }
        
        .required {
            color: #d97757;
            margin-left: 3px;
        }
        
        .form-control {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #f0ebe5;
            border-radius: 12px;
            font-size: 15px;
            background-color: #fefefe;
            transition: all 0.3s ease;
            font-family: inherit;
            color: #6b5b47;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #d4af8c;
            background-color: white;
            box-shadow: 0 0 0 3px rgba(212,175,140,0.15);
        }
        
        .form-control::placeholder {
            color: #c5b8a8;
        }
        
        textarea.form-control {
            resize: none;
            min-height: 80px;
            line-height: 1.6;
        }
        
        /* 선택 옵션 스타일 */
        .options-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .option-item {
            position: relative;
            background: #fefefe;
            border: 2px solid #f0ebe5;
            border-radius: 12px;
            padding: 16px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }
        
        .option-item:hover {
            background: #f8f6f2;
            border-color: #e8ddd2;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .option-item.selected {
            background: linear-gradient(135deg, #f9f7f4 0%, #f5f2ee 100%);
            border-color: #d4af8c;
            color: #6b5b47;
            box-shadow: 0 3px 12px rgba(212,175,140,0.2);
        }
        
        .option-item.selected::after {
            content: '✓';
            position: absolute;
            right: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: #d4af8c;
            font-weight: bold;
            font-size: 18px;
        }
        
        .option-item input {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }
        
        .option-item label {
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            display: block;
            width: 100%;
            line-height: 1.4;
            color: inherit;
        }
        
        /* 기타 입력 필드 */
        .other-input {
            margin-top: 10px;
            padding: 12px 16px;
            border: 2px solid #f0ebe5;
            border-radius: 10px;
            font-size: 14px;
            width: 100%;
            display: none;
        }
        
        .other-input.show {
            display: block;
        }
        
        .other-input:focus {
            outline: none;
            border-color: #d4af8c;
        }
        
        /* 하위 질문 스타일 */
        .sub-question {
            margin-top: 20px;
            padding: 20px;
            background: #f8f6f2;
            border-radius: 12px;
            border-left: 4px solid #d4af8c;
        }
        
        .sub-question .form-label {
            font-size: 14px;
            color: #6b5b47;
            margin-bottom: 10px;
        }
        
        /* 버튼 그룹 */
        .button-group {
            display: flex;
            gap: 14px;
            margin-top: 32px;
            padding: 22px 0 12px;
            border-top: 1px solid #f8f6f2;
        }
        
        .btn {
            flex: 1;
            padding: 17px 22px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            font-family: inherit;
            letter-spacing: -0.1px;
        }
        
        .btn:active {
            transform: scale(0.98);
        }
        
        .btn-secondary {
            background: #f8f6f2;
            color: #9b8a7a;
            border: 2px solid #f0ebe5;
        }
        
        .btn-secondary:hover {
            background: #f4f1ec;
            border-color: #e8ddd2;
            color: #6b5b47;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #d4af8c 0%, #c8a882 100%);
            color: white;
            box-shadow: 0 4px 16px rgba(212,175,140,0.4);
        }
        
        .btn-primary:hover {
            box-shadow: 0 6px 20px rgba(212,175,140,0.5);
            transform: translateY(-1px);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        /* 숨김/표시 */
        .step {
            display: none;
        }
        
        .step.active {
            display: block;
        }
        
        /* 로딩 및 성공 화면 */
        .status-screen {
            text-align: center;
            padding: 45px 25px;
        }
        
        .loading-spinner {
            width: 55px;
            height: 55px;
            border: 4px solid #f8f6f2;
            border-top: 4px solid #d4af8c;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 28px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .success-icon {
            width: 85px;
            height: 85px;
            background: linear-gradient(135deg, #a8c686 0%, #98b876 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 28px;
            color: white;
            font-size: 42px;
            box-shadow: 0 6px 20px rgba(168,198,134,0.3);
        }
        
        .status-title {
            font-size: 23px;
            font-weight: 600;
            color: #6b5b47;
            margin-bottom: 14px;
            letter-spacing: -0.3px;
        }
        
        .status-message {
            font-size: 15px;
            color: #9b8a7a;
            line-height: 1.7;
            margin-bottom: 28px;
        }
        
        /* 반응형 */
        @media (max-width: 420px) {
            .container {
                max-width: 100%;
                margin: 0;
                box-shadow: none;
            }
            
            .header {
                padding: 25px 20px;
            }
            
            .main-content {
                padding: 0 20px 20px;
            }
            
            .question-card {
                padding: 22px 18px;
            }
            
            .question-title {
                font-size: 16px;
            }
            
            .survey-description {
                padding: 15px;
            }
            
            .survey-description p {
                font-size: 13px;
                line-height: 1.6;
            }
            
            .prescription-title h2 {
                font-size: 16px;
            }
        }
        
        /* iOS 스타일 조정 */
        @supports (-webkit-touch-callout: none) {
            .form-control {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 첫 번째 단계용 전체 헤더 -->
        <header class="header full-header" id="fullHeader">
            <div class="clinic-logo-container">
                <div class="clinic-logo" style="background-image: url('hyunginje-logo.png')"></div>
                <div class="clinic-logo-fallback" style="display: none;"></div>
            </div>
            
            <div class="prescription-title">
                <h2>형인재 감량비책 비대면 설문지</h2>
                <p class="english">(HyungInJae Diet Program Online Survey)</p>
                
                <div class="survey-description">
                    <p>형인재 감량비책 비대면 처방을 위한 온라인 설문지입니다.</p>
                    <p>원내에서 사용하는 대면 설문과 동일한 내용으로, <strong>모든 질문에 충실 체크가 가능합니다.</strong></p>
                    <p>만약 나의 상태에 적합한 표현이 없다면 각 질문의 기타 간에 편히 작성해주세요.</p>
                    <p class="highlight">※ 빈칸 없이 작성해주셔야 접수 가능합니다!</p>
                </div>
            </div>
        </header>
        
        <!-- 2단계 이후용 간단한 헤더 -->
        <header class="header simple-header" id="simpleHeader" style="display: none;">
            <div class="simple-clinic-info">
                <div class="simple-logo"></div>
                <div class="simple-title">
                    <p>감량비책 비대면 설문지</p>
                </div>
            </div>
        </header>
        
        <!-- 진행 상태 -->
        <div class="progress-section">
            <div class="step-indicator">
                <div class="step-number" id="stepNumber">1</div>
                <div class="step-text">
                    <div class="step-title" id="stepTitle">기본 정보</div>
                    <div class="step-subtitle" id="stepSubtitle">이름과 연락처를 입력해주세요</div>
                </div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>
        
        <!-- 메인 컨텐츠 -->
        <main class="main-content">
            <form id="surveyForm">
                
                <!-- 1단계: 기본 정보 -->
                <div class="step active" data-step="1">
                    <div class="question-card">
                        <div class="question-header">
                            <h2 class="question-title">기본 정보</h2>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">이름을 말씀해주세요. <span class="required">*</span></label>
                            <input type="text" class="form-control" name="name" required placeholder="이름을 입력해주세요">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">휴대폰 번호를 말씀해주세요. (예: 01012345678) <span class="required">*</span></label>
                            <input type="tel" class="form-control" name="phone" required placeholder="01012345678">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">이메일 주소를 말씀해주세요.</label>
                            <input type="email" class="form-control" name="email" placeholder="example@email.com">
                        </div>
                        
                        <div class="button-group">
                            <button type="button" class="btn btn-primary" onclick="nextStep()">다음</button>
                        </div>
                    </div>
                </div>
                
                <!-- 2단계: 성별과 나이 -->
                <div class="step" data-step="2">
                    <div class="question-card">
                        <div class="question-header">
                            <h2 class="question-title">성별과 나이</h2>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">성별을 말씀해주세요. <span class="required">*</span></label>
                            <div class="options-group">
                                <div class="option-item" onclick="selectOption(this, 'gender', '여성')">
                                    <input type="radio" name="gender" value="여성" required>
                                    <label>여성</label>
                                </div>
                                <div class="option-item" onclick="selectOption(this, 'gender', '남성')">
                                    <input type="radio" name="gender" value="남성" required>
                                    <label>남성</label>
                                </div>
                                <div class="option-item" onclick="selectOption(this, 'gender', '기타')">
                                    <input type="radio" name="gender" value="기타" required>
                                    <label>기타:</label>
                                    <input type="text" class="other-input" name="gender_other" placeholder="직접입력">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">만 나이를 말씀해주세요. <span class="required">*</span></label>
                            <input type="number" class="form-control" name="age" required placeholder="만 나이를 입력해주세요" min="1" max="120">
                        </div>
                        
                        <div class="button-group">
                            <button type="button" class="btn btn-secondary" onclick="prevStep()">이전</button>
                            <button type="button" class="btn btn-primary" onclick="nextStep()">다음</button>
                        </div>
                    </div>
                </div>
                
                <!-- 3단계: 키/몸무게/체지방률 -->
                <div class="step" data-step="3">
                    <div class="question-card">
                        <div class="question-header">
                            <h2 class="question-title">신체 정보</h2>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">키/몸무게/체지방률을 작성해주세요. (정확한 체지방률을 모를 경우, 키와 몸무게만 기재해주세요.) <span class="required">*</span></label>
                            <textarea class="form-control" name="body_info" required placeholder="예: 키 170cm, 몸무게 70kg, 체지방률 25% (또는 키 170cm, 몸무게 70kg)"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">임신 계획 여부를 말씀해주세요. (다이어트 기간 중 피임은 필수입니다.)</label>
                            <div class="options-group">
                                <div class="option-item" onclick="selectOption(this, 'pregnancy_plan', '임신 계획이 있다')">
                                    <input type="radio" name="pregnancy_plan" value="임신 계획이 있다">
                                    <label>임신 계획이 있다</label>
                                </div>
                                <div class="option-item" onclick="selectOption(this, 'pregnancy_plan', '임신 계획이 없다')">
                                    <input type="radio" name="pregnancy_plan" value="임신 계획이 없다">
                                    <label>임신 계획이 없다</label>
                                </div>
                                <div class="option-item" onclick="selectOption(this, 'pregnancy_plan', '기타')">
                                    <input type="radio" name="pregnancy_plan" value="기타">
                                    <label>기타:</label>
                                    <input type="text" class="other-input" name="pregnancy_plan_other" placeholder="직접입력">
                                </div>
                            </div>
                        </div>
                        
                        <div class="button-group">
                            <button type="button" class="btn btn-secondary" onclick="prevStep()">이전</button>
                            <button type="button" class="btn btn-primary" onclick="nextStep()">다음</button>
                        </div>
                    </div>
                </div>
                
                <!-- 4단계: 소화 상태 -->
                <div class="step" data-step="4">
                    <div class="question-card">
                        <div class="question-header">
                            <h2 class="question-title">1. 평소 소화 상태를 말씀해주세요.</h2>
                        </div>
                        
                        <div class="form-group">
                            <div class="options-group">
                                <div class="option-item" onclick="selectOption(this, 'digestion', '소화력이 좋은 편')">
                                    <input type="radio" name="digestion" value="소화력이 좋은 편" required>
                                    <label>소화력이 좋은 편</label>
                                </div>
                                <div class="option-item" onclick="selectOption(this, 'digestion', '과식할 때 더부룩함')">
                                    <input type="radio" name="digestion" value="과식할 때 더부룩함" required>
                                    <label>과식할 때 더부룩함</label>
                                </div>
                                <div class="option-item" onclick="selectOption(this, 'digestion', '과식하지 않아도 더부룩함')">
                                    <input type="radio" name="digestion" value="과식하지 않아도 더부룩함" required>
                                    <label>과식하지 않아도 더부룩함</label>
                                </div>
                                <div class="option-item" onclick="selectOption(this, 'digestion', '식전에 속이 쓰림')">
                                    <input type="radio" name="digestion" value="식전에 속이 쓰림" required>
                                    <label>식전에 속이 쓰림</label>
                                </div>
                                <div class="option-item" onclick="selectOption(this, 'digestion', '식후에 속이 쓰림')">
                                    <input type="radio" name="digestion" value="식후에 속이 쓰림" required>
                                    <label>식후에 속이 쓰림</label>
                                </div>
                                <div class="option-item" onclick="selectOption(this, 'digestion', '간혹 식체를 함')">
                                    <input type="radio" name="digestion" value="간혹 식체를 함" required>
                                    <label>간혹 식체를 함</label>
                                </div>
                                <div class="option-item" onclick="selectOption(this, 'digestion', '자주 식체를 함')">
                                    <input type="radio" name="digestion" value="자주 식체를 함" required>
                                    <label>자주 식체를 함</label>
                                </div>
                                <div class="option-item" onclick="selectOption(this, 'digestion', '신물이 올라옴')">
                                    <input type="radio" name="digestion" value="신물이 올라옴" required>
                                    <label>신물이 올라옴</label>
                                </div>
                                <div class="option-item" onclick="selectOption(this, 'digestion', '기타')">
                                    <input type="radio" name="digestion" value="기타" required>
                                    <label>기타:</label>
                                    <input type="text" class="other-input" name="digestion_other" placeholder="직접입력">
                                </div>
                            </div>
                        </div>
                        
                        <div class="sub-question">
                            <label class="form-label">1-1. 잘 체하는 음식이 있다면 말씀해주세요. (없을 경우 '없음' 작성)</label>
                            <textarea class="form-control" name="indigestion_foods" placeholder="잘 체하는 음식이 있으면 적어주세요. 없으면 '없음'이라고 작성해주세요."></textarea>
                        </div>
                        
                        <div class="button-group">
                            <button type="button" class="btn btn-secondary" onclick="prevStep()">이전</button>
                            <button type="button" class="btn btn-primary" onclick="nextStep()">다음</button>
                        </div>
                    </div>
                </div>
                
                <!-- 계속해서 모든 질문들을 구현... -->
                <!-- 로딩 화면 -->
                <div class="step" data-step="loading">
                    <div class="question-card">
                        <div class="status-screen">
                            <div class="loading-spinner"></div>
                            <h2 class="status-title">설문지 제출 중</h2>
                            <p class="status-message">잠시만 기다려주세요...</p>
                        </div>
                    </div>
                </div>
                
                <!-- 완료 화면 -->
                <div class="step" data-step="success">
                    <div class="question-card">
                        <div class="status-screen">
                            <div class="success-icon">✓</div>
                            <h2 class="status-title">설문지 제출 완료</h2>
                            <p class="status-message">
                                설문지가 성공적으로 제출되었습니다.<br>
                                한의원에서 설문 내용을 검토 후<br>
                                빠른 시일 내에 연락드리겠습니다.<br><br>
                                감사합니다.
                            </p>
                        </div>
                    </div>
                </div>
                
            </form>
        </main>
    </div>
    
    <script>
        let currentStep = 1;
        const totalSteps = 20; // 실제 질문 수에 따라 조정
        
        // 초기화
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
            updateStepInfo();
            checkLogo();
        });
        
        // 로고 이미지 확인 및 fallback 처리
        function checkLogo() {
            const logoElement = document.querySelector('.clinic-logo');
            const fallbackElement = document.querySelector('.clinic-logo-fallback');
            
            const img = new Image();
            img.onload = function() {
                logoElement.style.display = 'block';
                fallbackElement.style.display = 'none';
            };
            img.onerror = function() {
                logoElement.style.display = 'none';
                fallbackElement.style.display = 'flex';
            };
            img.src = 'hyunginje-logo.png';
        }
        
        // 다음 단계
        function nextStep() {
            if (!validateCurrentStep()) {
                return;
            }
            
            if (currentStep < totalSteps) {
                document.querySelector(`.step[data-step="${currentStep}"]`).classList.remove('active');
                currentStep++;
                setTimeout(() => {
                    document.querySelector(`.step[data-step="${currentStep}"]`).classList.add('active');
                    updateProgress();
                    updateStepInfo();
                    updateHeader(); // 헤더 업데이트 추가
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }, 150);
            }
        }
        
        // 이전 단계
        function prevStep() {
            if (currentStep > 1) {
                document.querySelector(`.step[data-step="${currentStep}"]`).classList.remove('active');
                currentStep--;
                setTimeout(() => {
                    document.querySelector(`.step[data-step="${currentStep}"]`).classList.add('active');
                    updateProgress();
                    updateStepInfo();
                    updateHeader(); // 헤더 업데이트 추가
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }, 150);
            }
        }
        
        // 헤더 업데이트
        function updateHeader() {
            const fullHeader = document.getElementById('fullHeader');
            const simpleHeader = document.getElementById('simpleHeader');
            
            if (currentStep === 1) {
                // 첫 번째 단계: 전체 헤더 표시
                fullHeader.style.display = 'block';
                simpleHeader.style.display = 'none';
            } else {
                // 2단계 이후: 간단한 헤더 표시
                fullHeader.style.display = 'none';
                simpleHeader.style.display = 'block';
            }
        }
        
        // 진행바 업데이트
        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }
        
        // 단계 정보 업데이트
        function updateStepInfo() {
            document.getElementById('stepNumber').textContent = currentStep;
            
            const stepTitles = {
                1: "기본 정보",
                2: "성별과 나이", 
                3: "신체 정보",
                4: "소화 상태"
                // 나머지 단계들...
            };
            
            document.getElementById('stepTitle').textContent = stepTitles[currentStep] || `${currentStep}번째 질문`;
        }
        
        // 현재 단계 유효성 검사
        function validateCurrentStep() {
            const currentStepElement = document.querySelector(`.step[data-step="${currentStep}"]`);
            const requiredFields = currentStepElement.querySelectorAll('[required]');
            
            for (let field of requiredFields) {
                if (field.type === 'radio') {
                    const radioGroup = currentStepElement.querySelectorAll(`[name="${field.name}"]`);
                    const isChecked = Array.from(radioGroup).some(radio => radio.checked);
                    if (!isChecked) {
                        alert('필수 항목을 선택해주세요.');
                        return false;
                    }
                } else if (!field.value.trim()) {
                    field.focus();
                    alert('필수 항목을 입력해주세요.');
                    return false;
                }
            }
            return true;
        }
        
        // 라디오 버튼 선택
        function selectOption(element, name, value) {
            const input = element.querySelector('input');
            
            if (input.type === 'radio') {
                // 같은 그룹의 다른 항목들 선택 해제
                const siblings = element.parentNode.querySelectorAll('.option-item');
                siblings.forEach(sibling => {
                    sibling.classList.remove('selected');
                    const otherInput = sibling.querySelector('.other-input');
                    if (otherInput) otherInput.classList.remove('show');
                });
                
                // 현재 항목 선택
                element.classList.add('selected');
                input.checked = true;
                
                // 기타 선택시 입력 필드 표시
                const otherInput = element.querySelector('.other-input');
                if (otherInput && value === '기타') {
                    otherInput.classList.add('show');
                    otherInput.focus();
                }
            }
        }
    </script>
</body>
</html>